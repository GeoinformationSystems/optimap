{% extends "base.html" %}
{% block title %}Feeds | {% endblock title %}

{% block content %}
<div class="container px-4 py-8 max-w-3xl text-wrap">

  <h1 class="text-3xl mb-6 py-4">OPTIMAP feeds</h1>

  {% if global_feeds %}
    <h2 class="text-2xl mb-4">General feeds</h2>
    <p>Subscribe to research works from all sources, time periods, and regions.</p>
    <ul class="list-disc list-inside mb-8">
      {% for feed in global_feeds %}
        <li>
          <a href="{{ feed.url }}" class="text-blue-600 hover:underline">
            {{ feed.title }}
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  <h2 class="text-2xl mb-4">Regional feeds</h2>
  <p>Subscribe to research works from selected continents or oceans.</p>

  <h3 class="text-xl mb-2 mt-4">Continents</h3>
  <ul class="list-disc list-inside space-y-2 mb-6">
    {% for region in regions %}
      {% if region.region_type == 'C' %}
      <li class="flex flex-wrap items-center space-x-2">
        <strong><a href="{% url 'optimap:feed-continent-page' region.normalized_slug %}" class="text-blue-800 hover:underline">{{ region.name }}</a></strong>:

        <a href="{% url 'optimap:api-continent-georss' region.normalized_slug %}"
           class="text-blue-600 hover:underline"
           title="GeoRSS for {{ region.name }}">RSS</a>
        <span>|</span>

        <a href="{% url 'optimap:api-continent-atom' region.normalized_slug %}"
           class="text-blue-600 hover:underline"
           title="Atom for {{ region.name }}">Atom</a>

        <small class="text-gray-500">(updated {{ region.last_loaded|date:"Y-m-d H:i" }})</small>
      </li>
      {% endif %}
    {% endfor %}
  </ul>

  <h3 class="text-xl mb-2">Oceans</h3>
  <ul class="list-disc list-inside space-y-2 mb-8">
    {% for region in regions %}
      {% if region.region_type == 'O' %}
      <li class="flex flex-wrap items-center space-x-2">
        <strong><a href="{% url 'optimap:feed-ocean-page' region.normalized_slug %}" class="text-blue-800 hover:underline">{{ region.name }}</a></strong>:

        <a href="{% url 'optimap:api-ocean-georss' region.normalized_slug %}"
           class="text-blue-600 hover:underline"
           title="GeoRSS for {{ region.name }}">RSS</a>
        <span>|</span>

        <a href="{% url 'optimap:api-ocean-atom' region.normalized_slug %}"
           class="text-blue-600 hover:underline"
           title="Atom for {{ region.name }}">Atom</a>

        <small class="text-gray-500">(updated {{ region.last_loaded|date:"Y-m-d H:i" }})</small>
      </li>
      {% endif %}
    {% endfor %}
  </ul>

  <div class="mt-8 mb-4">
    <h3 class="text-lg font-semibold mb-2">Sources &amp; licenses for region data</h3>

    <div class="mb-4 text-sm text-gray-700">
      <p class="mb-1">
        <strong>Source:</strong>
        <a href="https://doi.org/10.14284/542" class="text-blue-600 hover:underline" target="_blank">Flanders Marine Institute (2021). Global Oceans and Seas, version 1</a>
        (<a href="https://creativecommons.org/licenses/by/4.0/" class="text-blue-600 hover:underline" target="_blank">CC BY 4.0 license</a>)
      </p>
      <p class="ml-4 text-gray-600">
        <strong>Regions:</strong> Arctic Ocean, Baltic Sea, Indian Ocean, Mediterranean Region, North Atlantic Ocean, North Pacific Ocean, South Atlantic Ocean, South China and Easter Archipelagic Seas, South Pacific Ocean, Southern Ocean
      </p>
    </div>

    <div class="text-sm text-gray-700">
      <p class="mb-1">
        <strong>Source:</strong>
        <a href="https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Continents/FeatureServer/0/query?where=1%3D1&outFields=*&f=geojson" class="text-blue-600 hover:underline" target="_blank">Esri Hub World Continents Feature Service</a>
        (<a href="https://www.arcgis.com/sharing/rest/content/items/57c1ade4fa7c4e2384e6a23f2b3bd254/info/metadata/metadata.xml?format=default&output=html" class="text-blue-600 hover:underline" target="_blank">license</a>)
      </p>
      <p class="ml-4 text-gray-600">
        <strong>Regions:</strong> Africa, Antarctica, Asia, Australia, Europe, North America, Oceania, South America
      </p>
    </div>
  </div>

  <div class="mt-6 mb-4 p-3 bg-blue-50 border border-blue-200 rounded text-xs text-gray-600">
    <p class="mb-1"><strong>Geometric processing:</strong></p>
    <p>Ocean geometries are simplified to reduce file size while preserving geographic accuracy. Simplification uses a tolerance of {{ ocean_simplification_tolerance }} degrees and removes the smallest {{ ocean_simplification_percentile }}% of interior holes (islands are preserved).</p>
  </div>

</div>
{% endblock content %}
