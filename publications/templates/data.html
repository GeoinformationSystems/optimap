{% extends "main.html" %}
{% load optimap_extras %}

{% block title %}Data & API | {% endblock %}

{% block content %}

<div class="row justify-content-center">
  <div class="col-8 py-5 text-wrap">
    <h1 class="py-2">OPTIMAP Data &amp; API</h1>

    <p class="lead">
      All publication metadata published in OPTIMAP is licensed under
      <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>.
    </p>

    <h2 class="py-2">API endpoint</h2>
    <p>
      The API endpoint is <b>{{ site|addstr:"/api"|urlize }}</b>.
      Visit the URL in your browser to explore the API.
    </p>

    <p>
      Example request to fetch publications using
      <a href="https://stedolan.github.io/jq/"><code>jq</code></a>:
    </p>
<pre>
curl -X GET {{ site|addstr:"/api" }}/publications/ | jq
</pre>

    <h2>OpenAPI schema</h2>
    <p>
      Download an OpenAPI specification at
      <b>{{ site|addstr:"/api/schema"|urlize }}</b>.
    </p>

    <h2>Interactive docs</h2>
    <p>
      Explore the API with an interactive UI at
      <b>{{ site|addstr:"/api/schema/ui"|urlize }}</b>.
    </p>

    <h2 class="py-2">Downloadable files</h2>
    <p>
      Our data exports are generated on a schedule and can be downloaded here:
    </p>
    <ul>
      <li>
        <a href="{% url 'download_cached_geojson' %}">GeoJSON (publications.geojson)</a>
      </li>
      <li>
        <a href="{% url 'download_cached_geojson_gz' %}">Gzipped GeoJSON (publications.geojson.gz)</a>
      </li>
    </ul>
  </div>
</div>

{% endblock %}
