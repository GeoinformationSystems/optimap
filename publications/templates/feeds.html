{% extends "base.html" %}
{% block title %}Feeds Â· {% endblock title %}

{% block content %}
<div class="container px-4 py-8 max-w-3xl text-wrap">

  <h1 class="text-3xl mb-6 py-4">Available Feeds</h1>

  {# --- Site-wide feeds --- #}
  {% if global_feeds %}
    <h2 class="text-2xl mb-4">All-site feeds</h2>
    <ul class="list-disc list-inside mb-8">
      {% for feed in global_feeds %}
        <li>
          <a href="{{ feed.url }}" class="text-blue-600 hover:underline">
            {{ feed.title }}
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  {# --- Region-by-region feeds --- #}
  <h2 class="text-2xl mb-4">Region-by-region feeds</h2>
  <ul class="list-disc list-inside space-y-2 mb-8">
    {% for region in regions %}
      <li class="flex flex-wrap items-center space-x-2">
        <strong>{{ region.name }}</strong>
        <span>({{ region.get_region_type_display }})</span>:

        <a href="{% url 'optimap:feed-georss-by-slug' region.name|slugify %}"
           class="text-blue-600 hover:underline"
           title="GeoRSS for {{ region.name }}">
          GeoRSS
        </a>
        <span>|</span>

        <a href="{{% url 'optimap:feed-geoatom-by-slug' region.name|slugify %}"
           class="text-blue-600 hover:underline"
           title="Atom for {{ region.name }}">
          GeoAtom
        </a>

        <small class="text-gray-500">
          (updated {{ region.last_loaded|date:"Y-m-d H:i" }})
        </small>
      </li>
    {% endfor %}
  </ul>

  {# --- Sources & Licenses --- #}
  <strong class="font-semibold mt-8 mb-4">Sources &amp; Licenses</strong>
  <ul class="list-disc list-inside space-y-2 text-sm text-gray-700">
    {% for region in regions %}
      <li class="flex items-center space-x-2">
        <a href="{{ region.source_url }}"
           class="flex-1 min-w-0 truncate text-blue-600 hover:underline"
           target="_blank"
           title="Source for {{ region.name }}">
          {{ region.name }}
        </a>
        <span>(<a href="{{ region.license }}">license</a>)</span>
      </li>
    {% endfor %}
  </ul>

</div>
{% endblock content %}
